name: Test
on:
  - push

jobs:
  build:
    strategy:
      fail-fast: true
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: stack
        uses: freckle/stack-action@v3

      - name: example/lift
        run: stack run -- lift example/hello.c -o example/frags.json

      - name: example/weave
        run: stack run -- weave example/hello.md -f example/frags.json -o example/output.md

      - name: example/diff
        run: diff -q example/output.md example/expected.md